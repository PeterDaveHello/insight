<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: charts/Series/MarkerSeries.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="insight">
            <span class="title">
                <a href="insight.html">insight</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight#seriesMax"><a href="insight.html#seriesMax">seriesMax</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.Axis">
            <span class="title">
                <a href="insight.Axis.html">insight.Axis</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.Axis.this.calculateBounds"><a href="insight.Axis.html#this.calculateBounds">this.calculateBounds</a></li>
            
                <li data-name="insight.Axis.this.domain"><a href="insight.Axis.html#this.domain">this.domain</a></li>
            
                <li data-name="insight.Axis.this.positionLabel"><a href="insight.Axis.html#this.positionLabel">this.positionLabel</a></li>
            
                <li data-name="insight.Axis.this.tickRotationTransform"><a href="insight.Axis.html#this.tickRotationTransform">this.tickRotationTransform</a></li>
            
                <li data-name="insight.Axis~applyScaleRange"><a href="insight.Axis.html#applyScaleRange">applyScaleRange</a></li>
            
                <li data-name="insight.Axis~findMax"><a href="insight.Axis.html#findMax">findMax</a></li>
            
                <li data-name="insight.Axis~findOrdinalValues"><a href="insight.Axis.html#findOrdinalValues">findOrdinalValues</a></li>
            
                <li data-name="insight.Axis~format"><a href="insight.Axis.html#format">format</a></li>
            
                <li data-name="insight.Axis~maxTime"><a href="insight.Axis.html#maxTime">maxTime</a></li>
            
                <li data-name="insight.Axis~minTime"><a href="insight.Axis.html#minTime">minTime</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.BubbleSeries">
            <span class="title">
                <a href="insight.BubbleSeries.html">insight.BubbleSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.Chart">
            <span class="title">
                <a href="insight.Chart.html">insight.Chart</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.ColumnSeries">
            <span class="title">
                <a href="insight.ColumnSeries.html">insight.ColumnSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.ColumnSeries.this.findMax"><a href="insight.ColumnSeries.html#this.findMax">this.findMax</a></li>
            
                <li data-name="insight.ColumnSeries.this.stacked"><a href="insight.ColumnSeries.html#this.stacked">this.stacked</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.LineSeries">
            <span class="title">
                <a href="insight.LineSeries.html">insight.LineSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.MarkerSeries">
            <span class="title">
                <a href="insight.MarkerSeries.html">insight.MarkerSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.RowSeries">
            <span class="title">
                <a href="insight.RowSeries.html">insight.RowSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.RowSeries.this.findMax"><a href="insight.RowSeries.html#this.findMax">this.findMax</a></li>
            
                <li data-name="insight.RowSeries.this.keys"><a href="insight.RowSeries.html#this.keys">this.keys</a></li>
            
                <li data-name="insight.RowSeries.this.seriesMax"><a href="insight.RowSeries.html#this.seriesMax">this.seriesMax</a></li>
            
                <li data-name="insight.RowSeries.this.stacked"><a href="insight.RowSeries.html#this.stacked">this.stacked</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.Series">
            <span class="title">
                <a href="insight.Series.html">insight.Series</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.Series.this.sliceSelector"><a href="insight.Series.html#this.sliceSelector">this.sliceSelector</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="MarkerSeries.js.html">Source: charts/Series/MarkerSeries.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * The MarkerSeries class extends the Series class and draws markers/targets on a chart
 * @class insight.MarkerSeries
 * @param {string} name - A uniquely identifying name for this chart
 * @param {Chart} chart - The parent chart object
 * @param {DataSet} data - The DataSet containing this series' data
 * @param {insight.Scales.Scale} x - the x axis
 * @param {insight.Scales.Scale} y - the y axis
 * @param {object} color - a string or function that defines the color to be used for the items in this series
 */
insight.MarkerSeries = function MarkerSeries(name, chart, data, x, y, color) {

    insight.Series.call(this, name, chart, data, x, y, color);

    var self = this;
    var thickness = 5;

    var widthFactor = 1;
    var offset = 0;

    var horizontal = false;
    var vertical = true;

    this.xPosition = function(d) {
        var pos = 0;

        if (vertical) {
            pos = self.x.scale(self.keyFunction()(d));

            if (!offset) {
                offset = self.calculateOffset(d);
            }

            pos = widthFactor != 1 ? pos + offset : pos;
        } else {
            pos = self.x.scale(self.valueFunction()(d));

        }

        return pos;
    };


    this.keys = function() {

        var f = self.keyFunction();

        return self.dataset()
            .map(f);
    };

    this.calculateOffset = function(d) {

        var thickness = horizontal ? self.markerHeight(d) : self.markerWidth(d);
        var scalePos = horizontal ? self.y.scale.rangeBand(d) : self.x.scale.rangeBand(d);

        return (scalePos - thickness) * 0.5;
    };

    this.yPosition = function(d) {

        var position = 0;

        if (horizontal) {
            position = self.y.scale(self.keyFunction()(d));

            if (!offset) {
                offset = self.calculateOffset(d);
            }

            position = widthFactor != 1 ? position + offset : position;

        } else {
            position = self.y.scale(self.valueFunction()(d));
        }

        return position;
    };

    this.horizontal = function() {
        horizontal = true;
        vertical = false;

        return this;
    };

    this.vertical = function() {
        vertical = true;
        horizontal = false;
        return this;
    };

    this.widthFactor = function(_) {

        if (!arguments.length) {
            return widthFactor;
        }
        widthFactor = _;
        return this;
    };

    this.thickness = function(_) {
        if (!arguments.length) {
            return thickness;
        }
        thickness = _;
        return this;
    };

    this.markerWidth = function(d) {
        var w = 0;

        if (horizontal) {
            w = self.thickness();
        } else {
            w = self.x.scale.rangeBand(d) * widthFactor;
        }

        return w;
    };

    this.markerHeight = function(d) {
        var h = 0;

        if (horizontal) {
            h = self.y.scale.rangeBand(d) * widthFactor;
        } else {
            h = self.thickness();
        }

        return h;
    };



    this.className = function(d) {
        var dimension = self.sliceSelector(d);

        var selected = self.selectedClassName(dimension);

        return self.name + 'class bar ' + dimension + " " + selected + " " + self.dimensionName;
    };



    this.draw = function(drag) {

        var reset = function(d) {
            d.yPos = 0;
            d.xPos = 0;
        };

        var d = this.dataset()
            .forEach(reset);

        var groups = this.chart.chart
            .selectAll('g.' + insight.Constants.BarGroupClass + "." + this.name)
            .data(this.dataset(), this.keyAccessor);

        var newGroups = groups.enter()
            .append('g')
            .attr('class', insight.Constants.BarGroupClass + " " + this.name);

        var newBars = newGroups.selectAll('rect.bar');

        var click = function(filter) {
            return self.click(this, filter);
        };

        var duration = function(d, i) {
            return 200 + (i * 20);
        };

        newBars = newGroups.append('rect')
            .attr('class', self.className)
            .attr('y', this.y.bounds[0])
            .attr('height', 0)
            .attr('fill', this.color)
            .attr('clip-path', 'url(#' + this.chart.clipPath() + ')')
            .on('mouseover', this.mouseOver)
            .on('mouseout', this.mouseOut)
            .on('click', click);

        newBars.append('svg:text')
            .attr('class', insight.Constants.ToolTipTextClass);

        var bars = groups.selectAll('.' + this.name + 'class.bar');

        bars
            .transition()
            .duration(duration)
            .attr('y', this.yPosition)
            .attr('x', this.xPosition)
            .attr('width', this.markerWidth)
            .attr('height', this.markerHeight);

        bars.selectAll('.' + insight.Constants.ToolTipTextClass)
            .text(this.tooltipFunction());

        groups.exit()
            .remove();
    };

    return this;
};

insight.MarkerSeries.prototype = Object.create(insight.Series.prototype);
insight.MarkerSeries.prototype.constructor = insight.MarkerSeries;
</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>.
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
