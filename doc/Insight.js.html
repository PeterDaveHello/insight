<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: Insight.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="insight">
            <span class="title">
                <a href="insight.html">insight</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.Axis">
            <span class="title">
                <a href="insight.Axis.html">insight.Axis</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.Axis.this.calculateBounds"><a href="insight.Axis.html#this.calculateBounds">this.calculateBounds</a></li>
            
                <li data-name="insight.Axis.this.domain"><a href="insight.Axis.html#this.domain">this.domain</a></li>
            
                <li data-name="insight.Axis.this.positionLabel"><a href="insight.Axis.html#this.positionLabel">this.positionLabel</a></li>
            
                <li data-name="insight.Axis.this.tickRotationTransform"><a href="insight.Axis.html#this.tickRotationTransform">this.tickRotationTransform</a></li>
            
                <li data-name="insight.Axis~applyScaleRange"><a href="insight.Axis.html#applyScaleRange">applyScaleRange</a></li>
            
                <li data-name="insight.Axis~findMax"><a href="insight.Axis.html#findMax">findMax</a></li>
            
                <li data-name="insight.Axis~findOrdinalValues"><a href="insight.Axis.html#findOrdinalValues">findOrdinalValues</a></li>
            
                <li data-name="insight.Axis~format"><a href="insight.Axis.html#format">format</a></li>
            
                <li data-name="insight.Axis~maxTime"><a href="insight.Axis.html#maxTime">maxTime</a></li>
            
                <li data-name="insight.Axis~minTime"><a href="insight.Axis.html#minTime">minTime</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.BubbleSeries">
            <span class="title">
                <a href="insight.BubbleSeries.html">insight.BubbleSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.ColumnSeries">
            <span class="title">
                <a href="insight.ColumnSeries.html">insight.ColumnSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.ColumnSeries.this.findMax"><a href="insight.ColumnSeries.html#this.findMax">this.findMax</a></li>
            
                <li data-name="insight.ColumnSeries.this.seriesMax"><a href="insight.ColumnSeries.html#this.seriesMax">this.seriesMax</a></li>
            
                <li data-name="insight.ColumnSeries.this.stacked"><a href="insight.ColumnSeries.html#this.stacked">this.stacked</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.LineSeries">
            <span class="title">
                <a href="insight.LineSeries.html">insight.LineSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.RowSeries">
            <span class="title">
                <a href="insight.RowSeries.html">insight.RowSeries</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.RowSeries.this.findMax"><a href="insight.RowSeries.html#this.findMax">this.findMax</a></li>
            
                <li data-name="insight.RowSeries.this.keys"><a href="insight.RowSeries.html#this.keys">this.keys</a></li>
            
                <li data-name="insight.RowSeries.this.seriesMax"><a href="insight.RowSeries.html#this.seriesMax">this.seriesMax</a></li>
            
                <li data-name="insight.RowSeries.this.stacked"><a href="insight.RowSeries.html#this.stacked">this.stacked</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="insight.Series">
            <span class="title">
                <a href="insight.Series.html">insight.Series</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="insight.Series.this.sliceSelector"><a href="insight.Series.html#this.sliceSelector">this.sliceSelector</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Insight.js.html">Source: Insight.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * This is the global namespace that also handles some global events and filtering logic (the logic could be moved into a specific class as it gets larger)
 * @namespace insight
 */
var insight = (function() {

    return {
        Charts: [],
        Groups: [],
        Dimensions: [],
        FilteredDimensions: [],
        DimensionChartMap: {},
        init: function() {
            this.Charts = [];
            this.Groups = [];
            this.FilteredDimensions = [];
            this.DimensionChartMap = {};
        },
        redrawCharts: function() {
            for (var i = 0; i &lt; this.Charts
                .length; i++) {
                this.Charts[i].draw();
            }
        },
        addChart: function(chart) {

            var self = this;

            chart.triggerRedraw = this.redrawCharts.bind(this);

            this.Charts.push(chart);

            return chart;
        },
        filterFunction: function(filter, element) {
            var value = filter.key ? filter.key : filter;

            return {
                name: value,
                filterFunction: function(d) {
                    if (Array.isArray(d)) {
                        return d.indexOf(value) != -1;
                    } else {
                        return String(d) == String(value);
                    }
                }
            };
        },
        compareFilters: function(filterFunction) {
            return function(d) {
                return String(d.name) == String(filterFunction.name);
            };
        },
        applyCSSClasses: function(chart, value, dimensionSelector) {
            var listeningSeries = this.DimensionChartMap[chart.data.dimension.Name];

            listeningSeries.forEach(function(chart) {

                chart.highlight(dimensionSelector, value);


            });
        },
        drawCharts: function() {

            var self = this;

            this.Charts
                .forEach(
                    function(chart) {

                        chart.series()
                            .forEach(function(s) {
                                if (s.data.dimension) {
                                    if (self.DimensionChartMap[s.data.dimension.Name]) {
                                        if (self.DimensionChartMap[s.data.dimension.Name].indexOf(chart) == -1) {
                                            self.DimensionChartMap[s.data.dimension.Name].push(chart);
                                        }
                                    } else {
                                        self.DimensionChartMap[s.data.dimension.Name] = [chart];
                                    }
                                }
                            });

                        chart.init();
                    });

            for (var i = 0; i &lt; this.Charts
                .length; i++) {
                this.Charts[i].draw();
            }

        },
        chartFilterHandler: function(chart, value, dimensionSelector) {
            var self = this;

            this.applyCSSClasses(chart, value, dimensionSelector);

            var dimension = chart.data.dimension;

            var filterFunction = this.filterFunction(value);

            if (filterFunction) {
                var dims = this.Dimensions
                    .filter(dimension.comparer);

                var activeDim = this.FilteredDimensions
                    .filter(dimension.comparer);

                if (!activeDim.length) {
                    this.FilteredDimensions.push(dimension);
                }

                var comparerFunction = this.compareFilters(filterFunction);

                dims.map(function(dim) {

                    var filterExists = dim.Filters
                        .filter(comparerFunction)
                        .length;

                    //if the dimension is already filtered by this value, toggle (remove) the filter
                    if (filterExists) {
                        InsightUtils.removeMatchesFromArray(dim.Filters, comparerFunction);

                    } else {
                        // add the provided filter to the list for this dimension

                        dim.Filters.push(filterFunction);
                    }

                    // reset this dimension if no filters exist, else apply the filter to the dataset.
                    if (dim.Filters.length === 0) {

                        InsightUtils.removeItemFromArray(self.FilteredDimensions, dim);
                        dim.Dimension.filterAll();

                    } else {
                        dim.Dimension.filter(function(d) {
                            var vals = dim.Filters
                                .map(function(func) {
                                    return func.filterFunction(d);
                                });

                            return vals.filter(function(result) {
                                    return result;
                                })
                                .length > 0;
                        });
                    }
                });

                this.Groups.forEach(function(group) {
                    group.recalculate();

                });

                this.redrawCharts();
            }
        }
    };

})();
</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>.
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
